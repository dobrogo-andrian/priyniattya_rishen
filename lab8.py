import matplotlib.pyplot as plt
import matplotlib.patches as mpatches
from matplotlib.patches import FancyBboxPatch
import numpy as np
from typing import List, Tuple, Dict


# ============================================================================
# –ë–ê–ó–û–í–ò–ô –ö–õ–ê–° –î–õ–Ø –î–ï–†–ï–í–ê –†–Ü–®–ï–ù–¨
# ============================================================================

class DecisionNode:
    """–í—É–∑–æ–ª —Ä—ñ—à–µ–Ω–Ω—è (–∫–≤–∞–¥—Ä–∞—Ç)"""

    def __init__(self, name: str, x: float, y: float):
        self.name = name
        self.x = x
        self.y = y
        self.children = []
        self.expected_value = 0

    def add_child(self, child, label: str = "", probability: float = None, payoff: float = None):
        """–î–æ–¥–∞—Ç–∏ –¥–æ—á—ñ—Ä–Ω—ñ–π –≤—É–∑–æ–ª"""
        self.children.append({
            'node': child,
            'label': label,
            'probability': probability,
            'payoff': payoff
        })


class ChanceNode:
    """–í—É–∑–æ–ª –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ (–∫–æ–ª–æ)"""

    def __init__(self, name: str, x: float, y: float):
        self.name = name
        self.x = x
        self.y = y
        self.children = []
        self.expected_value = 0

    def add_child(self, child, label: str, probability: float, payoff: float = None):
        """–î–æ–¥–∞—Ç–∏ –¥–æ—á—ñ—Ä–Ω—ñ–π –≤—É–∑–æ–ª"""
        self.children.append({
            'node': child,
            'label': label,
            'probability': probability,
            'payoff': payoff
        })


class EndNode:
    """–ö—ñ–Ω—Ü–µ–≤–∏–π –≤—É–∑–æ–ª (—Ç—Ä–∏–∫—É—Ç–Ω–∏–∫)"""

    def __init__(self, name: str, x: float, y: float, payoff: float):
        self.name = name
        self.x = x
        self.y = y
        self.payoff = payoff
        self.expected_value = payoff


# ============================================================================
# –ö–õ–ê–° –î–õ–Ø –ü–û–ë–£–î–û–í–ò –¢–ê –ê–ù–ê–õ–Ü–ó–£ –î–ï–†–ï–í–ê –†–Ü–®–ï–ù–¨
# ============================================================================

class DecisionTree:
    """–ö–ª–∞—Å –¥–ª—è –ø–æ–±—É–¥–æ–≤–∏ —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É –¥–µ—Ä–µ–≤–∞ —Ä—ñ—à–µ–Ω—å"""

    def __init__(self, title: str):
        self.title = title
        self.root = None
        self.all_nodes = []

    def calculate_expected_values(self, node):
        """–†–µ–∫—É—Ä—Å–∏–≤–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å (–∑–≤–æ—Ä–æ—Ç–Ω—ñ–π —Ö—ñ–¥)"""
        if isinstance(node, EndNode):
            return node.payoff

        if isinstance(node, ChanceNode):
            # –î–ª—è –≤—É–∑–ª–∞ –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ: EV = Œ£(p_i * payoff_i)
            expected_value = 0
            for child_info in node.children:
                child_node = child_info['node']
                probability = child_info['probability']

                # –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—á–∏—Å–ª—é—î–º–æ EV –¥–ª—è –¥–æ—á—ñ—Ä–Ω—å–æ–≥–æ –≤—É–∑–ª–∞
                child_ev = self.calculate_expected_values(child_node)

                # –î–æ–¥–∞—î–º–æ –≤–∏–≥—Ä–∞—à –Ω–∞ —Ä–µ–±—Ä—ñ (—è–∫—â–æ —î)
                if child_info['payoff'] is not None:
                    child_ev += child_info['payoff']

                expected_value += probability * child_ev

            node.expected_value = expected_value
            return expected_value

        if isinstance(node, DecisionNode):
            # –î–ª—è –≤—É–∑–ª–∞ —Ä—ñ—à–µ–Ω–Ω—è: –≤–∏–±–∏—Ä–∞—î–º–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–µ EV
            max_ev = float('-inf')

            for child_info in node.children:
                child_node = child_info['node']

                # –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—á–∏—Å–ª—é—î–º–æ EV –¥–ª—è –¥–æ—á—ñ—Ä–Ω—å–æ–≥–æ –≤—É–∑–ª–∞
                child_ev = self.calculate_expected_values(child_node)

                # –î–æ–¥–∞—î–º–æ –≤–∏–≥—Ä–∞—à –Ω–∞ —Ä–µ–±—Ä—ñ (—è–∫—â–æ —î)
                if child_info['payoff'] is not None:
                    child_ev += child_info['payoff']

                max_ev = max(max_ev, child_ev)

            node.expected_value = max_ev
            return max_ev

    def find_optimal_path(self, node, path=[]):
        """–ó–Ω–∞–π—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–π —à–ª—è—Ö —É –¥–µ—Ä–µ–≤—ñ"""
        if isinstance(node, EndNode):
            return path + [node]

        if isinstance(node, ChanceNode):
            # –î–ª—è –≤—É–∑–ª–∞ –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ—Ö–æ–¥–∏–º–æ –≤—Å—ñ –≥—ñ–ª–∫–∏
            paths = []
            for child_info in node.children:
                child_path = self.find_optimal_path(
                    child_info['node'],
                    path + [{'node': node, 'choice': child_info['label']}]
                )
                paths.append(child_path)
            return paths

        if isinstance(node, DecisionNode):
            # –î–ª—è –≤—É–∑–ª–∞ —Ä—ñ—à–µ–Ω–Ω—è –≤–∏–±–∏—Ä–∞—î–º–æ –Ω–∞–π–∫—Ä–∞—â—É –≥—ñ–ª–∫—É
            best_child = None
            best_ev = float('-inf')

            for child_info in node.children:
                child_node = child_info['node']
                child_ev = child_node.expected_value

                if child_info['payoff'] is not None:
                    child_ev += child_info['payoff']

                if child_ev > best_ev:
                    best_ev = child_ev
                    best_child = child_info

            return self.find_optimal_path(
                best_child['node'],
                path + [{'node': node, 'choice': best_child['label']}]
            )

    def draw_tree(self, filename: str = None):
        """–ù–∞–º–∞–ª—é–≤–∞—Ç–∏ –¥–µ—Ä–µ–≤–æ —Ä—ñ—à–µ–Ω—å"""
        fig, ax = plt.subplots(1, 1, figsize=(16, 10))
        ax.set_xlim(-0.5, 10.5)
        ax.set_ylim(-0.5, 10.5)
        ax.axis('off')

        # –ó–∞–≥–æ–ª–æ–≤–æ–∫
        ax.text(5, 10, self.title, fontsize=14, weight='bold', ha='center')

        # –ú–∞–ª—é—î–º–æ –≤—É–∑–ª–∏ —Ç–∞ —Ä–µ–±—Ä–∞
        self._draw_node(ax, self.root)

        # –õ–µ–≥–µ–Ω–¥–∞
        legend_elements = [
            mpatches.Rectangle((0, 0), 1, 1, fc='lightblue', label='–í—É–∑–æ–ª —Ä—ñ—à–µ–Ω–Ω—è'),
            mpatches.Circle((0, 0), 0.5, fc='lightgreen', label='–í—É–∑–æ–ª –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ'),
            mpatches.Polygon([[0, 0], [1, 0], [0.5, 1]], fc='lightyellow', label='–ö—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç')
        ]
        ax.legend(handles=legend_elements, loc='upper left', fontsize=10)

        plt.tight_layout()

        if filename:
            plt.savefig(filename, dpi=300, bbox_inches='tight')
            print(f"–î–µ—Ä–µ–≤–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ —É —Ñ–∞–π–ª: {filename}")

        plt.show()

    def _draw_node(self, ax, node, parent_x=None, parent_y=None, label="", probability=None):
        """–†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –º–∞–ª—é–≤–∞—Ç–∏ –≤—É–∑–æ–ª —Ç–∞ –π–æ–≥–æ –¥–æ—á—ñ—Ä–Ω—ñ –≤—É–∑–ª–∏"""
        # –ú–∞–ª—é—î–º–æ —Ä–µ–±—Ä–æ –≤—ñ–¥ –±–∞—Ç—å–∫–∞
        if parent_x is not None:
            ax.plot([parent_x, node.x], [parent_y, node.y], 'k-', linewidth=2)

            # –ü—ñ–¥–ø–∏—Å —Ä–µ–±—Ä–∞
            mid_x = (parent_x + node.x) / 2
            mid_y = (parent_y + node.y) / 2

            if probability is not None:
                label_text = f"{label}\np={probability:.2f}"
            else:
                label_text = label

            ax.text(mid_x, mid_y + 0.2, label_text, fontsize=9,
                    ha='center', bbox=dict(boxstyle='round', facecolor='white', alpha=0.8))

        # –ú–∞–ª—é—î–º–æ –≤—É–∑–æ–ª
        if isinstance(node, DecisionNode):
            # –ö–≤–∞–¥—Ä–∞—Ç –¥–ª—è —Ä—ñ—à–µ–Ω–Ω—è
            rect = FancyBboxPatch((node.x - 0.3, node.y - 0.2), 0.6, 0.4,
                                  boxstyle="round,pad=0.05",
                                  facecolor='lightblue', edgecolor='black', linewidth=2)
            ax.add_patch(rect)
            ax.text(node.x, node.y, node.name, fontsize=10, ha='center', va='center', weight='bold')

            # EV –ø—ñ–¥ –≤—É–∑–ª–æ–º
            ax.text(node.x, node.y - 0.4, f'EV={node.expected_value:.0f}',
                    fontsize=9, ha='center', style='italic', color='blue')

        elif isinstance(node, ChanceNode):
            # –ö–æ–ª–æ –¥–ª—è –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ
            circle = plt.Circle((node.x, node.y), 0.25, facecolor='lightgreen',
                                edgecolor='black', linewidth=2)
            ax.add_patch(circle)
            ax.text(node.x, node.y, node.name, fontsize=10, ha='center', va='center', weight='bold')

            # EV –ø—ñ–¥ –≤—É–∑–ª–æ–º
            ax.text(node.x, node.y - 0.5, f'EV={node.expected_value:.0f}',
                    fontsize=9, ha='center', style='italic', color='green')

        elif isinstance(node, EndNode):
            # –¢—Ä–∏–∫—É—Ç–Ω–∏–∫ –¥–ª—è –∫—ñ–Ω—Ü–µ–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
            triangle = mpatches.Polygon([[node.x, node.y + 0.3],
                                         [node.x - 0.25, node.y - 0.2],
                                         [node.x + 0.25, node.y - 0.2]],
                                        facecolor='lightyellow', edgecolor='black', linewidth=2)
            ax.add_patch(triangle)
            ax.text(node.x, node.y, node.name, fontsize=9, ha='center', va='center')

            # –í–∏–≥—Ä–∞—à –ø—ñ–¥ –≤—É–∑–ª–æ–º
            ax.text(node.x, node.y - 0.5, f'{node.payoff:.0f}',
                    fontsize=10, ha='center', weight='bold', color='red')

        # –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –º–∞–ª—é—î–º–æ –¥–æ—á—ñ—Ä–Ω—ñ –≤—É–∑–ª–∏
        if hasattr(node, 'children'):
            for child_info in node.children:
                self._draw_node(ax, child_info['node'], node.x, node.y,
                                child_info['label'], child_info.get('probability'))


# ============================================================================
# –ó–ê–í–î–ê–ù–ù–Ø ‚Ññ1: –°–¢–í–û–†–ï–ù–ù–Ø –í–ò–†–û–ë–ù–ò–¶–¢–í–ê
# ============================================================================

def task1_create_production_tree(A1: float, A2: float, A3: float,
                                 B1: float, B2: float, B3: float):
    """
    –ü–æ–±—É–¥–æ–≤–∞ –¥–µ—Ä–µ–≤–∞ —Ä—ñ—à–µ–Ω—å –¥–ª—è –≤–∏–±–æ—Ä—É —Ç–∏–ø—É –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞

    A1, A2, A3 - –≤–∏–≥—Ä–∞—à—ñ –ø—Ä–∏ —Å–ø—Ä–∏—è—Ç–ª–∏–≤–∏—Ö —É–º–æ–≤–∞—Ö
    B1, B2, B3 - –≤–∏–≥—Ä–∞—à—ñ –ø—Ä–∏ –Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤–∏—Ö —É–º–æ–≤–∞—Ö
    """
    print("\n" + "=" * 100)
    print("–ó–ê–í–î–ê–ù–ù–Ø ‚Ññ1: –í–ò–ë–Ü–† –¢–ò–ü–£ –í–ò–†–û–ë–ù–ò–¶–¢–í–ê")
    print("=" * 100)

    print("\nüìã –í–•–Ü–î–ù–Ü –î–ê–ù–Ü:")
    print(f"   –°–ø—Ä–∏—è—Ç–ª–∏–≤—ñ —É–º–æ–≤–∏ (p=0.5):")
    print(f"      –í–µ–ª–∏–∫–µ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ: {A1:,.0f} –≥.–æ.")
    print(f"      –ú–∞–ª–µ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–æ: {A2:,.0f} –≥.–æ.")
    print(f"      –ü—Ä–æ–¥–∞–∂ –ø–∞—Ç–µ–Ω—Ç—É:     {A3:,.0f} –≥.–æ.")

    print(f"\n   –ù–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤—ñ —É–º–æ–≤–∏ (p=0.5):")
    print(f"      –í–µ–ª–∏–∫–µ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ: {B1:,.0f} –≥.–æ.")
    print(f"      –ú–∞–ª–µ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–æ:  {B2:,.0f} –≥.–æ.")
    print(f"      –ü—Ä–æ–¥–∞–∂ –ø–∞—Ç–µ–Ω—Ç—É:     {B3:,.0f} –≥.–æ.")

    # –°—Ç–≤–æ—Ä—é—î–º–æ –¥–µ—Ä–µ–≤–æ
    tree = DecisionTree("–ó–∞–≤–¥–∞–Ω–Ω—è 1: –í–∏–±—ñ—Ä —Ç–∏–ø—É –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞")

    # –ö–æ—Ä–µ–Ω–µ–≤–∏–π –≤—É–∑–æ–ª - —Ä—ñ—à–µ–Ω–Ω—è
    root = DecisionNode("–†—ñ—à–µ–Ω–Ω—è", 1, 5)
    tree.root = root

    # –í—É–∑–ª–∏ –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è
    chance1 = ChanceNode("–†–∏–Ω–æ–∫", 4, 7)
    chance2 = ChanceNode("–†–∏–Ω–æ–∫", 4, 5)
    chance3 = ChanceNode("–†–∏–Ω–æ–∫", 4, 3)

    # –ö—ñ–Ω—Ü–µ–≤—ñ –≤—É–∑–ª–∏
    end11 = EndNode("–°–ø—Ä.", 7, 8, A1)
    end12 = EndNode("–ù–µ—Å–ø—Ä.", 7, 6, B1)

    end21 = EndNode("–°–ø—Ä.", 7, 5.5, A2)
    end22 = EndNode("–ù–µ—Å–ø—Ä.", 7, 4.5, B2)

    end31 = EndNode("–°–ø—Ä.", 7, 3.5, A3)
    end32 = EndNode("–ù–µ—Å–ø—Ä.", 7, 2.5, B3)

    # –ë—É–¥—É—î–º–æ –∑–≤'—è–∑–∫–∏
    root.add_child(chance1, "–í–µ–ª–∏–∫–µ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ")
    root.add_child(chance2, "–ú–∞–ª–µ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–æ")
    root.add_child(chance3, "–ü—Ä–æ–¥–∞—Ç–∏ –ø–∞—Ç–µ–Ω—Ç")

    chance1.add_child(end11, "–°–ø—Ä–∏—è—Ç–ª–∏–≤—ñ", 0.5)
    chance1.add_child(end12, "–ù–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤—ñ", 0.5)

    chance2.add_child(end21, "–°–ø—Ä–∏—è—Ç–ª–∏–≤—ñ", 0.5)
    chance2.add_child(end22, "–ù–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤—ñ", 0.5)

    chance3.add_child(end31, "–°–ø—Ä–∏—è—Ç–ª–∏–≤—ñ", 0.5)
    chance3.add_child(end32, "–ù–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤—ñ", 0.5)

    # –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å
    tree.calculate_expected_values(root)

    # –ê–Ω–∞–ª—ñ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
    print("\n" + "=" * 100)
    print("üìä –ê–ù–ê–õ–Ü–ó –û–ß–Ü–ö–£–í–ê–ù–ò–• –ó–ù–ê–ß–ï–ù–¨:")
    print("=" * 100)

    ev1 = 0.5 * A1 + 0.5 * B1
    ev2 = 0.5 * A2 + 0.5 * B2
    ev3 = 0.5 * A3 + 0.5 * B3

    print(f"\n1Ô∏è‚É£  –í–µ–ª–∏–∫–µ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ:")
    print(f"   EV = 0.5 √ó {A1:,.0f} + 0.5 √ó {B1:,.0f} = {ev1:,.0f} –≥.–æ.")

    print(f"\n2Ô∏è‚É£  –ú–∞–ª–µ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–æ:")
    print(f"   EV = 0.5 √ó {A2:,.0f} + 0.5 √ó {B2:,.0f} = {ev2:,.0f} –≥.–æ.")

    print(f"\n3Ô∏è‚É£  –ü—Ä–æ–¥–∞–∂ –ø–∞—Ç–µ–Ω—Ç—É:")
    print(f"   EV = 0.5 √ó {A3:,.0f} + 0.5 √ó {B3:,.0f} = {ev3:,.0f} –≥.–æ.")

    # –í–∏–∑–Ω–∞—á–∞—î–º–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è
    decisions = [
        ("–í–µ–ª–∏–∫–µ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ", ev1),
        ("–ú–∞–ª–µ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–æ", ev2),
        ("–ü—Ä–æ–¥–∞–∂ –ø–∞—Ç–µ–Ω—Ç—É", ev3)
    ]

    best_decision = max(decisions, key=lambda x: x[1])

    print("\n" + "=" * 100)
    print("‚úÖ –û–ü–¢–ò–ú–ê–õ–¨–ù–ï –†–Ü–®–ï–ù–ù–Ø:")
    print("=" * 100)
    print(f"\n   {best_decision[0]}")
    print(f"   –û—á—ñ–∫—É–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è: {best_decision[1]:,.0f} –≥.–æ.")

    # –ú–∞–ª—é—î–º–æ –¥–µ—Ä–µ–≤–æ
    tree.draw_tree("task1_decision_tree.png")

    return tree, best_decision


# ============================================================================
# –ó–ê–í–î–ê–ù–ù–Ø ‚Ññ2: –î–û–°–õ–Ü–î–ñ–ï–ù–ù–Ø –†–ò–ù–ö–£
# ============================================================================

def task2_market_research_tree(A1: float, A2: float, A3: float,
                               B1: float, B2: float, B3: float,
                               P11: float, P12: float, P21: float, P22: float,
                               Q: float):
    """
    –ü–æ–±—É–¥–æ–≤–∞ –¥–µ—Ä–µ–≤–∞ —Ä—ñ—à–µ–Ω—å –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É

    P11 - –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å —Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–≥–æ —Ñ–∞–∫—Ç—É –ø—Ä–∏ —Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–º—É –ø—Ä–æ–≥–Ω–æ–∑—ñ
    P12 - –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–≥–æ —Ñ–∞–∫—Ç—É –ø—Ä–∏ —Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–º—É –ø—Ä–æ–≥–Ω–æ–∑—ñ
    P21 - –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å —Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–≥–æ —Ñ–∞–∫—Ç—É –ø—Ä–∏ –Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–º—É –ø—Ä–æ–≥–Ω–æ–∑—ñ
    P22 - –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–≥–æ —Ñ–∞–∫—Ç—É –ø—Ä–∏ –Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–º—É –ø—Ä–æ–≥–Ω–æ–∑—ñ
    Q - –≤–∞—Ä—Ç—ñ—Å—Ç—å –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥—É
    """
    print("\n" + "=" * 100)
    print("–ó–ê–í–î–ê–ù–ù–Ø ‚Ññ2: –î–û–°–õ–Ü–î–ñ–ï–ù–ù–Ø –†–ò–ù–ö–£")
    print("=" * 100)

    print("\nüìã –í–•–Ü–î–ù–Ü –î–ê–ù–Ü:")
    print(f"   –í–∞—Ä—Ç—ñ—Å—Ç—å –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥—É: {Q:,.0f} –≥.–æ.")
    print(f"\n   –ô–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –ø—Ä–æ–≥–Ω–æ–∑—É:")
    print(f"      –°–ø—Ä–∏—è—Ç–ª–∏–≤–∏–π –ø—Ä–æ–≥–Ω–æ–∑: 0.75")
    print(f"      –ù–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤–∏–π –ø—Ä–æ–≥–Ω–æ–∑: 0.25")

    print(f"\n   –ú–∞—Ç—Ä–∏—Ü—è —É–º–æ–≤–Ω–∏—Ö –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π:")
    print(f"      {'':20} {'–§–∞–∫—Ç –°–ø—Ä.':<15} {'–§–∞–∫—Ç –ù–µ—Å–ø—Ä.':<15}")
    print(f"      {'–ü—Ä–æ–≥–Ω–æ–∑ –°–ø—Ä.':<20} {P11:<15.2f} {P12:<15.2f}")
    print(f"      {'–ü—Ä–æ–≥–Ω–æ–∑ –ù–µ—Å–ø—Ä.':<20} {P21:<15.2f} {P22:<15.2f}")

    # –û–±—á–∏—Å–ª—é—î–º–æ –∞–ø–æ—Å—Ç–µ—Ä—ñ–æ—Ä–Ω—ñ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –∑–∞ —Ñ–æ—Ä–º—É–ª–æ—é –ë–∞–π—î—Å–∞
    # P(–°–ø—Ä–∏—è—Ç–ª–∏–≤—ñ | –ü—Ä–æ–≥–Ω–æ–∑) = P(–ü—Ä–æ–≥–Ω–æ–∑ | –°–ø—Ä–∏—è—Ç–ª–∏–≤—ñ) * P(–°–ø—Ä–∏—è—Ç–ª–∏–≤—ñ) / P(–ü—Ä–æ–≥–Ω–æ–∑)

    # –ê–ø—Ä—ñ–æ—Ä–Ω—ñ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ
    p_favorable = 0.5
    p_unfavorable = 0.5

    # –ô–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –ø—Ä–æ–≥–Ω–æ–∑—ñ–≤ (–∑ —É–º–æ–≤–∏)
    p_prog_fav = 0.75
    p_prog_unfav = 0.25

    # –ó–∞ —Ç–µ–æ—Ä–µ–º–æ—é –ø–æ–≤–Ω–æ—ó –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ:
    # P(–ü—Ä–æ–≥–Ω–æ–∑ –°–ø—Ä.) = P(–ü—Ä–æ–≥–Ω–æ–∑ –°–ø—Ä. | –°–ø—Ä.) * P(–°–ø—Ä.) + P(–ü—Ä–æ–≥–Ω–æ–∑ –°–ø—Ä. | –ù–µ—Å–ø—Ä.) * P(–ù–µ—Å–ø—Ä.)

    # –ê–ø–æ—Å—Ç–µ—Ä—ñ–æ—Ä–Ω—ñ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –ø—Ä–∏ —Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–º—É –ø—Ä–æ–≥–Ω–æ–∑—ñ
    # P(–°–ø—Ä. | –ü—Ä–æ–≥–Ω–æ–∑ –°–ø—Ä.) = P11 * p_favorable / p_prog_fav
    p_fav_given_prog_fav = (P11 * p_favorable) / p_prog_fav
    p_unfav_given_prog_fav = 1 - p_fav_given_prog_fav

    # –ê–ø–æ—Å—Ç–µ—Ä—ñ–æ—Ä–Ω—ñ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –ø—Ä–∏ –Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–º—É –ø—Ä–æ–≥–Ω–æ–∑—ñ
    # P(–°–ø—Ä. | –ü—Ä–æ–≥–Ω–æ–∑ –ù–µ—Å–ø—Ä.) = P21 * p_favorable / p_prog_unfav
    p_fav_given_prog_unfav = (P21 * p_favorable) / p_prog_unfav
    p_unfav_given_prog_unfav = 1 - p_fav_given_prog_unfav

    print(f"\n   –ê–ø–æ—Å—Ç–µ—Ä—ñ–æ—Ä–Ω—ñ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ:")
    print(f"      –ü—Ä–∏ —Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–º—É –ø—Ä–æ–≥–Ω–æ–∑—ñ:")
    print(f"         P(–°–ø—Ä. | –ü—Ä–æ–≥–Ω–æ–∑ –°–ø—Ä.) = {p_fav_given_prog_fav:.3f}")
    print(f"         P(–ù–µ—Å–ø—Ä. | –ü—Ä–æ–≥–Ω–æ–∑ –°–ø—Ä.) = {p_unfav_given_prog_fav:.3f}")
    print(f"      –ü—Ä–∏ –Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–º—É –ø—Ä–æ–≥–Ω–æ–∑—ñ:")
    print(f"         P(–°–ø—Ä. | –ü—Ä–æ–≥–Ω–æ–∑ –ù–µ—Å–ø—Ä.) = {p_fav_given_prog_unfav:.3f}")
    print(f"         P(–ù–µ—Å–ø—Ä. | –ü—Ä–æ–≥–Ω–æ–∑ –ù–µ—Å–ø—Ä.) = {p_unfav_given_prog_unfav:.3f}")

    # –°—Ç–≤–æ—Ä—é—î–º–æ –¥–µ—Ä–µ–≤–æ
    tree = DecisionTree("–ó–∞–≤–¥–∞–Ω–Ω—è 2: –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É")

    # –ö–æ—Ä–µ–Ω–µ–≤–∏–π –≤—É–∑–æ–ª - —Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è
    root = DecisionNode("–î–æ—Å–ª—ñ–¥–∂—É–≤–∞—Ç–∏?", 0.5, 5)
    tree.root = root

    # –ì—ñ–ª–∫–∞ "–ù–µ –¥–æ—Å–ª—ñ–¥–∂—É–≤–∞—Ç–∏" - —è–∫ —É –∑–∞–≤–¥–∞–Ω–Ω—ñ 1
    decision_no_research = DecisionNode("–†—ñ—à–µ–Ω–Ω—è", 3, 7.5)

    chance_no1 = ChanceNode("–†–∏–Ω–æ–∫", 5.5, 9)
    chance_no2 = ChanceNode("–†–∏–Ω–æ–∫", 5.5, 7.5)
    chance_no3 = ChanceNode("–†–∏–Ω–æ–∫", 5.5, 6)

    end_no11 = EndNode("–°", 8, 9.5, A1)
    end_no12 = EndNode("–ù", 8, 8.5, B1)
    end_no21 = EndNode("–°", 8, 8, A2)
    end_no22 = EndNode("–ù", 8, 7, B2)
    end_no31 = EndNode("–°", 8, 6.5, A3)
    end_no32 = EndNode("–ù", 8, 5.5, B3)

    root.add_child(decision_no_research, "–ù–µ –¥–æ—Å–ª—ñ–¥–∂—É–≤–∞—Ç–∏")

    decision_no_research.add_child(chance_no1, "–í–µ–ª–∏–∫–µ")
    decision_no_research.add_child(chance_no2, "–ú–∞–ª–µ")
    decision_no_research.add_child(chance_no3, "–ü–∞—Ç–µ–Ω—Ç")

    chance_no1.add_child(end_no11, "–°–ø—Ä.", 0.5)
    chance_no1.add_child(end_no12, "–ù–µ—Å–ø—Ä.", 0.5)
    chance_no2.add_child(end_no21, "–°–ø—Ä.", 0.5)
    chance_no2.add_child(end_no22, "–ù–µ—Å–ø—Ä.", 0.5)
    chance_no3.add_child(end_no31, "–°–ø—Ä.", 0.5)
    chance_no3.add_child(end_no32, "–ù–µ—Å–ø—Ä.", 0.5)

    # –ì—ñ–ª–∫–∞ "–î–æ—Å–ª—ñ–¥–∂—É–≤–∞—Ç–∏" - –≤—Ä–∞—Ö–æ–≤—É—î–º–æ –ø—Ä–æ–≥–Ω–æ–∑
    chance_research = ChanceNode("–ü—Ä–æ–≥–Ω–æ–∑", 3, 2.5)
    root.add_child(chance_research, "–î–æ—Å–ª—ñ–¥–∂—É–≤–∞—Ç–∏", payoff=-Q)

    # –ü—Ä–∏ —Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–º—É –ø—Ä–æ–≥–Ω–æ–∑—ñ
    decision_prog_fav = DecisionNode("–†—ñ—à–µ–Ω–Ω—è", 5.5, 4)
    chance_research.add_child(decision_prog_fav, "–°–ø—Ä. –ø—Ä–æ–≥–Ω–æ–∑", 0.75)

    chance_fav1 = ChanceNode("–†–∏–Ω–æ–∫", 8, 5)
    chance_fav2 = ChanceNode("–†–∏–Ω–æ–∫", 8, 4)
    chance_fav3 = ChanceNode("–†–∏–Ω–æ–∫", 8, 3)

    decision_prog_fav.add_child(chance_fav1, "–í–µ–ª–∏–∫–µ")
    decision_prog_fav.add_child(chance_fav2, "–ú–∞–ª–µ")
    decision_prog_fav.add_child(chance_fav3, "–ü–∞—Ç–µ–Ω—Ç")

    end_fav11 = EndNode("–°", 10, 5.5, A1)
    end_fav12 = EndNode("–ù", 10, 4.5, B1)
    end_fav21 = EndNode("–°", 10, 4.3, A2)
    end_fav22 = EndNode("–ù", 10, 3.7, B2)
    end_fav31 = EndNode("–°", 10, 3.3, A3)
    end_fav32 = EndNode("–ù", 10, 2.7, B3)

    chance_fav1.add_child(end_fav11, "–°", p_fav_given_prog_fav)
    chance_fav1.add_child(end_fav12, "–ù", p_unfav_given_prog_fav)
    chance_fav2.add_child(end_fav21, "–°", p_fav_given_prog_fav)
    chance_fav2.add_child(end_fav22, "–ù", p_unfav_given_prog_fav)
    chance_fav3.add_child(end_fav31, "–°", p_fav_given_prog_fav)
    chance_fav3.add_child(end_fav32, "–ù", p_unfav_given_prog_fav)

    # –ü—Ä–∏ –Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤–æ–º—É –ø—Ä–æ–≥–Ω–æ–∑—ñ
    decision_prog_unfav = DecisionNode("–†—ñ—à–µ–Ω–Ω—è", 5.5, 1)
    chance_research.add_child(decision_prog_unfav, "–ù–µ—Å–ø—Ä. –ø—Ä–æ–≥–Ω–æ–∑", 0.25)

    chance_unfav1 = ChanceNode("–†–∏–Ω–æ–∫", 8, 2)
    chance_unfav2 = ChanceNode("–†–∏–Ω–æ–∫", 8, 1)
    chance_unfav3 = ChanceNode("–†–∏–Ω–æ–∫", 8, 0)

    decision_prog_unfav.add_child(chance_unfav1, "–í–µ–ª–∏–∫–µ")
    decision_prog_unfav.add_child(chance_unfav2, "–ú–∞–ª–µ")
    decision_prog_unfav.add_child(chance_unfav3, "–ü–∞—Ç–µ–Ω—Ç")

    end_unfav11 = EndNode("–°", 10, 2.5, A1)
    end_unfav12 = EndNode("–ù", 10, 1.5, B1)
    end_unfav21 = EndNode("–°", 10, 1.3, A2)
    end_unfav22 = EndNode("–ù", 10, 0.7, B2)
    end_unfav31 = EndNode("–°", 10, 0.3, A3)
    end_unfav32 = EndNode("–ù", 10, -0.3, B3)

    chance_unfav1.add_child(end_unfav11, "–°", p_fav_given_prog_unfav)
    chance_unfav1.add_child(end_unfav12, "–ù", p_unfav_given_prog_unfav)
    chance_unfav2.add_child(end_unfav21, "–°", p_fav_given_prog_unfav)
    chance_unfav2.add_child(end_unfav22, "–ù", p_unfav_given_prog_unfav)
    chance_unfav3.add_child(end_unfav31, "–°", p_fav_given_prog_unfav)
    chance_unfav3.add_child(end_unfav32, "–ù", p_unfav_given_prog_unfav)

    # –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å
    tree.calculate_expected_values(root)

    # –ê–Ω–∞–ª—ñ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
    print("\n" + "=" * 100)
    print("üìä –ê–ù–ê–õ–Ü–ó –û–ß–Ü–ö–£–í–ê–ù–ò–• –ó–ù–ê–ß–ï–ù–¨:")
    print("=" * 100)

    # –ë–µ–∑ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è
    ev_no_research = decision_no_research.expected_value
    print(f"\n1Ô∏è‚É£  –ë–µ–∑ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É:")
    print(f"   EV = {ev_no_research:,.0f} –≥.–æ.")

    # –ó –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è–º
    ev_with_research = chance_research.expected_value - Q
    print(f"\n2Ô∏è‚É£  –ó –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è–º —Ä–∏–Ω–∫—É:")
    print(f"   EV = {chance_research.expected_value:,.0f} - {Q:,.0f} = {ev_with_research:,.0f} –≥.–æ.")

    # –¶—ñ–Ω–Ω—ñ—Å—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
    evpi = ev_with_research - ev_no_research
    print(f"\nüí° –¶–Ü–ù–ù–Ü–°–¢–¨ –î–û–î–ê–¢–ö–û–í–û–á –Ü–ù–§–û–†–ú–ê–¶–Ü–á:")
    print(f"   EVPI = {evpi:,.0f} –≥.–æ.")

    if evpi > 0:
        print(f"   ‚úÖ –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É –í–ê–†–¢–ï —Ç–æ–≥–æ (–¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –ø—Ä–∏–±—É—Ç–æ–∫: {evpi:,.0f} –≥.–æ.)")
    else:
        print(f"   ‚ùå –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É –ù–ï –í–ê–†–¢–ï —Ç–æ–≥–æ (–≤—Ç—Ä–∞—Ç–∞: {abs(evpi):,.0f} –≥.–æ.)")

    print("\n" + "=" * 100)
    print("‚úÖ –û–ü–¢–ò–ú–ê–õ–¨–ù–ï –†–Ü–®–ï–ù–ù–Ø:")
    print("=" * 100)

    if ev_with_research > ev_no_research:
        print(f"\n   –ü—Ä–æ–≤–µ—Å—Ç–∏ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É")
        print(f"   –û—á—ñ–∫—É–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è: {ev_with_research:,.0f} –≥.–æ.")
    else:
        print(f"\n   –ù–µ –ø—Ä–æ–≤–æ–¥–∏—Ç–∏ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É")
        print(f"   –û—á—ñ–∫—É–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è: {ev_no_research:,.0f} –≥.–æ.")

    # –ú–∞–ª—é—î–º–æ –¥–µ—Ä–µ–≤–æ (—Å–ø—Ä–æ—â–µ–Ω—É –≤–µ—Ä—Å—ñ—é —á–µ—Ä–µ–∑ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å)
    # tree.draw_tree("task2_decision_tree.png")

    return tree, evpi


# ============================================================================
# –ó–ê–í–î–ê–ù–ù–Ø ‚Ññ3: –í–ò–ë–Ü–† –ü–û–°–¢–ê–ß–ê–õ–¨–ù–ò–ö–ê
# ============================================================================

def task3_supplier_selection_tree(prob_A: List[float], prob_B: List[float],
                                  K: float, N: int, L: float):
    """
    –ü–æ–±—É–¥–æ–≤–∞ –¥–µ—Ä–µ–≤–∞ —Ä—ñ—à–µ–Ω—å –¥–ª—è –≤–∏–±–æ—Ä—É –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞

    prob_A, prob_B - –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –≤—ñ–¥—Å–æ—Ç–∫—ñ–≤ –±—Ä–∞–∫—É –¥–ª—è –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫—ñ–≤
    K - –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —É—Å—É–Ω–µ–Ω–Ω—è –±—Ä–∞–∫—É –æ–¥–Ω–æ–≥–æ –≤–∏—Ä–æ–±—É
    N - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏—Ä–æ–±—ñ–≤ —É –ø–∞—Ä—Ç—ñ—ó
    L - –∑–Ω–∏–∂–∫–∞ –≤—ñ–¥ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ B
    """
    print("\n" + "=" * 100)
    print("–ó–ê–í–î–ê–ù–ù–Ø ‚Ññ3: –í–ò–ë–Ü–† –ü–û–°–¢–ê–ß–ê–õ–¨–ù–ò–ö–ê")
    print("=" * 100)

    print("\nüìã –í–•–Ü–î–ù–Ü –î–ê–ù–Ü:")
    print(f"   –†–æ–∑–º—ñ—Ä –ø–∞—Ä—Ç—ñ—ó: {N:,} —à—Ç.")
    print(f"   –í–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —É—Å—É–Ω–µ–Ω–Ω—è –±—Ä–∞–∫—É: {K:,.0f} –≥.–æ./—à—Ç.")
    print(f"   –ó–Ω–∏–∂–∫–∞ –≤—ñ–¥ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ B: {L:,.0f} –≥.–æ.")

    print(f"\n   –ô–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ % –±—Ä–∞–∫—É:")
    print(f"      {'% –±—Ä–∞–∫—É':<10} {'–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ A':<20} {'–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ B':<20}")
    print(f"      {'-' * 50}")
    for i, (pa, pb) in enumerate(zip(prob_A, prob_B), 1):
        print(f"      {i}%{' ' * 8} {pa:<20.2f} {pb:<20.2f}")

    # –°—Ç–≤–æ—Ä—é—î–º–æ –¥–µ—Ä–µ–≤–æ
    tree = DecisionTree("–ó–∞–≤–¥–∞–Ω–Ω—è 3: –í–∏–±—ñ—Ä –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞")

    # –ö–æ—Ä–µ–Ω–µ–≤–∏–π –≤—É–∑–æ–ª - –≤–∏–±—ñ—Ä –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞
    root = DecisionNode("–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫", 1, 5)
    tree.root = root

    # –í—É–∑–ª–∏ –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞
    chance_A = ChanceNode("% –±—Ä–∞–∫—É", 4, 7)
    chance_B = ChanceNode("% –±—Ä–∞–∫—É", 4, 3)

    root.add_child(chance_A, "–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ A")
    root.add_child(chance_B, "–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ B", payoff=L)  # –ó–Ω–∏–∂–∫–∞

    # –ö—ñ–Ω—Ü–µ–≤—ñ –≤—É–∑–ª–∏ –¥–ª—è –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ A
    y_positions_A = np.linspace(9, 5, len(prob_A))
    for i, (prob, y_pos) in enumerate(zip(prob_A, y_positions_A), 1):
        defect_rate = i / 100.0
        cost = -defect_rate * N * K  # –í–∏—Ç—Ä–∞—Ç–∏ (–Ω–µ–≥–∞—Ç–∏–≤–Ω—ñ)
        end_node = EndNode(f"{i}%", 7, y_pos, cost)
        chance_A.add_child(end_node, f"{i}% –±—Ä–∞–∫—É", prob)

    # –ö—ñ–Ω—Ü–µ–≤—ñ –≤—É–∑–ª–∏ –¥–ª—è –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ B
    y_positions_B = np.linspace(5, 1, len(prob_B))
    for i, (prob, y_pos) in enumerate(zip(prob_B, y_positions_B), 1):
        defect_rate = i / 100.0
        cost = L - defect_rate * N * K  # –ó–Ω–∏–∂–∫–∞ –º—ñ–Ω—É—Å –≤–∏—Ç—Ä–∞—Ç–∏
        end_node = EndNode(f"{i}%", 7, y_pos, cost)
        chance_B.add_child(end_node, f"{i}% –±—Ä–∞–∫—É", prob)

    # –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å
    tree.calculate_expected_values(root)

    # –ê–Ω–∞–ª—ñ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
    print("\n" + "=" * 100)
    print("üìä –ê–ù–ê–õ–Ü–ó –û–ß–Ü–ö–£–í–ê–ù–ò–• –í–ò–¢–†–ê–¢:")
    print("=" * 100)

    # –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ A
    ev_A = 0
    print(f"\n1Ô∏è‚É£  –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ A:")
    for i, prob in enumerate(prob_A, 1):
        defect_rate = i / 100.0
        cost = -defect_rate * N * K
        ev_A += prob * cost
        print(f"   {i}% –±—Ä–∞–∫—É (p={prob:.2f}): –≤–∏—Ç—Ä–∞—Ç–∏ = {cost:,.0f} –≥.–æ.")
    print(f"   –û—á—ñ–∫—É–≤–∞–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏: {ev_A:,.0f} –≥.–æ.")

    # –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ B
    ev_B = L
    print(f"\n2Ô∏è‚É£  –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ B:")
    print(f"   –ó–Ω–∏–∂–∫–∞: +{L:,.0f} –≥.–æ.")
    for i, prob in enumerate(prob_B, 1):
        defect_rate = i / 100.0
        cost = -defect_rate * N * K
        ev_B += prob * cost
        print(f"   {i}% –±—Ä–∞–∫—É (p={prob:.2f}): –≤–∏—Ç—Ä–∞—Ç–∏ = {cost:,.0f} –≥.–æ.")
    print(f"   –û—á—ñ–∫—É–≤–∞–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ (–∑ –∑–Ω–∏–∂–∫–æ—é): {ev_B:,.0f} –≥.–æ.")

    # –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è
    print("\n" + "=" * 100)
    print("‚úÖ –û–ü–¢–ò–ú–ê–õ–¨–ù–ï –†–Ü–®–ï–ù–ù–Ø:")
    print("=" * 100)

    diff = ev_B - ev_A

    if ev_B > ev_A:
        print(f"\n   –í–∏–±—Ä–∞—Ç–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ B")
        print(f"   –ü–µ—Ä–µ–≤–∞–≥–∏: {diff:,.0f} –≥.–æ.")
        print(f"   –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {ev_B:,.0f} –≥.–æ.")
    else:
        print(f"\n   –í–∏–±—Ä–∞—Ç–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ A")
        print(f"   –ü–µ—Ä–µ–≤–∞–≥–∏: {abs(diff):,.0f} –≥.–æ.")
        print(f"   –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {ev_A:,.0f} –≥.–æ.")

    print(f"\nüí° –ê–ù–ê–õ–Ü–ó:")
    avg_defect_A = sum((i / 100.0) * prob for i, prob in enumerate(prob_A, 1))
    avg_defect_B = sum((i / 100.0) * prob for i, prob in enumerate(prob_B, 1))

    print(f"   –°–µ—Ä–µ–¥–Ω—ñ–π % –±—Ä–∞–∫—É:")
    print(f"      –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ A: {avg_defect_A * 100:.2f}%")
    print(f"      –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ B: {avg_defect_B * 100:.2f}%")

    break_even = L / (N * K * (avg_defect_B - avg_defect_A)) * 100
    if avg_defect_B > avg_defect_A:
        print(f"\n   –¢–æ—á–∫–∞ –±–µ–∑–∑–±–∏—Ç–∫–æ–≤–æ—Å—Ç—ñ:")
        print(f"   –ó–Ω–∏–∂–∫–∞ –º–∞—î –ø–æ–∫—Ä–∏–≤–∞—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é —É –≤–∏—Ç—Ä–∞—Ç–∞—Ö –Ω–∞ –±—Ä–∞–∫")
        print(f"   –ü–æ—Ç–æ—á–Ω–∞ —Ä—ñ–∑–Ω–∏—Ü—è: {(avg_defect_B - avg_defect_A) * 100:.2f}%")

    # –ú–∞–ª—é—î–º–æ –¥–µ—Ä–µ–≤–æ
    tree.draw_tree("task3_decision_tree.png")

    return tree, ev_A, ev_B


# ============================================================================
# –û–°–ù–û–í–ù–ê –ü–†–û–ì–†–ê–ú–ê - –í–ê–†–Ü–ê–ù–¢ 4
# ============================================================================

def main():
    print("=" * 100)
    print(" " * 30 + "–õ–ê–ë–û–†–ê–¢–û–†–ù–ê –†–û–ë–û–¢–ê ‚Ññ8")
    print(" " * 25 + "–î–ï–†–ï–í–û –†–Ü–®–ï–ù–¨ –í –£–ú–û–í–ê–• –†–ò–ó–ò–ö–£")
    print(" " * 40 + "–í–ê–†–Ü–ê–ù–¢ 4")
    print("=" * 100)

    # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –∫–∏—Ä–∏–ª–∏—Ü—ñ —É matplotlib
    plt.rcParams['font.family'] = 'DejaVu Sans'
    plt.rcParams['axes.unicode_minus'] = False

    # ========================================================================
    # –í–•–Ü–î–ù–Ü –î–ê–ù–Ü –ó –í–ê–†–Ü–ê–ù–¢–£ 4
    # ========================================================================

    # –ó–∞–≤–¥–∞–Ω–Ω—è 1 —Ç–∞ 2
    A1 = 550000  # –í–µ–ª–∏–∫–µ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ, —Å–ø—Ä–∏—è—Ç–ª–∏–≤—ñ —É–º–æ–≤–∏
    A2 = 300000  # –ú–∞–ª–µ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–æ, —Å–ø—Ä–∏—è—Ç–ª–∏–≤—ñ —É–º–æ–≤–∏
    A3 = 55000  # –ü—Ä–æ–¥–∞–∂ –ø–∞—Ç–µ–Ω—Ç—É, —Å–ø—Ä–∏—è—Ç–ª–∏–≤—ñ —É–º–æ–≤–∏
    B1 = -250000  # –í–µ–ª–∏–∫–µ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ, –Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤—ñ —É–º–æ–≤–∏
    B2 = -75000  # –ú–∞–ª–µ –ø—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–æ, –Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤—ñ —É–º–æ–≤–∏
    B3 = 55000  # –ü—Ä–æ–¥–∞–∂ –ø–∞—Ç–µ–Ω—Ç—É, –Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤—ñ —É–º–æ–≤–∏

    # –ó–∞–≤–¥–∞–Ω–Ω—è 2 - –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É
    P11 = 0.75  # P(–ü—Ä–æ–≥–Ω–æ–∑ —Å–ø—Ä. | –§–∞–∫—Ç —Å–ø—Ä.)
    P12 = 0.25  # P(–ü—Ä–æ–≥–Ω–æ–∑ —Å–ø—Ä. | –§–∞–∫—Ç –Ω–µ—Å–ø—Ä.)
    P21 = 0.3  # P(–ü—Ä–æ–≥–Ω–æ–∑ –Ω–µ—Å–ø—Ä. | –§–∞–∫—Ç —Å–ø—Ä.)
    P22 = 0.7  # P(–ü—Ä–æ–≥–Ω–æ–∑ –Ω–µ—Å–ø—Ä. | –§–∞–∫—Ç –Ω–µ—Å–ø—Ä.)
    Q = 10000  # –í–∞—Ä—Ç—ñ—Å—Ç—å –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥—É

    # –ó–∞–≤–¥–∞–Ω–Ω—è 3 - –≤–∏–±—ñ—Ä –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞
    prob_A = [0.6, 0.3, 0.15, 0.15, 0.05]  # –ô–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –±—Ä–∞–∫—É –¥–ª—è A
    prob_B = [0.3, 0.25, 0.15, 0.1, 0.05]  # –ô–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –±—Ä–∞–∫—É –¥–ª—è B
    K = 140  # –í–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —É—Å—É–Ω–µ–Ω–Ω—è –±—Ä–∞–∫—É –æ–¥–Ω–æ–≥–æ –≤–∏—Ä–æ–±—É
    N = 15000  # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏—Ä–æ–±—ñ–≤ —É –ø–∞—Ä—Ç—ñ—ó
    L = 1100  # –ó–Ω–∏–∂–∫–∞ –≤—ñ–¥ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ B

    # ========================================================================
    # –ó–ê–í–î–ê–ù–ù–Ø ‚Ññ1: –í–ò–ë–Ü–† –¢–ò–ü–£ –í–ò–†–û–ë–ù–ò–¶–¢–í–ê
    # ========================================================================

    print("\n\n")
    print("‚ïî" + "=" * 98 + "‚ïó")
    print("‚ïë" + " " * 30 + "–ó–ê–í–î–ê–ù–ù–Ø ‚Ññ1: –í–ò–ë–Ü–† –¢–ò–ü–£ –í–ò–†–û–ë–ù–ò–¶–¢–í–ê" + " " * 33 + "‚ïë")
    print("‚ïö" + "=" * 98 + "‚ïù")

    tree1, best_decision1 = task1_create_production_tree(A1, A2, A3, B1, B2, B3)

    # ========================================================================
    # –ó–ê–í–î–ê–ù–ù–Ø ‚Ññ2: –î–û–°–õ–Ü–î–ñ–ï–ù–ù–Ø –†–ò–ù–ö–£
    # ========================================================================

    print("\n\n")
    print("‚ïî" + "=" * 98 + "‚ïó")
    print("‚ïë" + " " * 35 + "–ó–ê–í–î–ê–ù–ù–Ø ‚Ññ2: –î–û–°–õ–Ü–î–ñ–ï–ù–ù–Ø –†–ò–ù–ö–£" + " " * 33 + "‚ïë")
    print("‚ïö" + "=" * 98 + "‚ïù")

    tree2, evpi = task2_market_research_tree(A1, A2, A3, B1, B2, B3, P11, P12, P21, P22, Q)

    # ========================================================================
    # –ó–ê–í–î–ê–ù–ù–Ø ‚Ññ3: –í–ò–ë–Ü–† –ü–û–°–¢–ê–ß–ê–õ–¨–ù–ò–ö–ê
    # ========================================================================

    print("\n\n")
    print("‚ïî" + "=" * 98 + "‚ïó")
    print("‚ïë" + " " * 35 + "–ó–ê–í–î–ê–ù–ù–Ø ‚Ññ3: –í–ò–ë–Ü–† –ü–û–°–¢–ê–ß–ê–õ–¨–ù–ò–ö–ê" + " " * 31 + "‚ïë")
    print("‚ïö" + "=" * 98 + "‚ïù")

    tree3, ev_A, ev_B = task3_supplier_selection_tree(prob_A, prob_B, K, N, L)

    # ========================================================================
    # –ó–ê–ì–ê–õ–¨–ù–Ü –í–ò–°–ù–û–í–ö–ò
    # ========================================================================

    print("\n\n")
    print("=" * 100)
    print("üìà –ó–ê–ì–ê–õ–¨–ù–Ü –í–ò–°–ù–û–í–ö–ò")
    print("=" * 100)

    print("""
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                              –ú–ï–¢–û–î –î–ï–†–ï–í–ê –†–Ü–®–ï–ù–¨                                               ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

–ü–ï–†–ï–í–ê–ì–ò –ú–ï–¢–û–î–£:
‚úì –ù–∞–æ—á–Ω—ñ—Å—Ç—å - –≥—Ä–∞—Ñ—ñ—á–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –º–æ–∂–ª–∏–≤–∏—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤
‚úì –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ—Å—Ç—å - —á—ñ—Ç–∫–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —Ä—ñ—à–µ–Ω—å —Ç–∞ –ø–æ–¥—ñ–π
‚úì –í—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –Ω–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ—Å—Ç—ñ - –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ –¥–ª—è –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –ø–æ–¥—ñ–π
‚úì –ö—ñ–ª—å–∫—ñ—Å–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ - –æ—á—ñ–∫—É–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –≤–∞—Ä—ñ–∞–Ω—Ç—É
‚úì –ê–Ω–∞–ª—ñ–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ - –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π
‚úì –¶—ñ–Ω–Ω—ñ—Å—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó - –æ—Ü—ñ–Ω–∫–∞ –≤–∞—Ä—Ç–æ—Å—Ç—ñ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å

–û–°–ù–û–í–ù–Ü –ï–õ–ï–ú–ï–ù–¢–ò:
1. –í—É–∑–æ–ª —Ä—ñ—à–µ–Ω–Ω—è (‚ñ°) - —Ç–æ—á–∫–∞ –ø—Ä–∏–π–Ω—è—Ç—Ç—è —Ä—ñ—à–µ–Ω–Ω—è
2. –í—É–∑–æ–ª –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ (‚óã) - –≤–∏–ø–∞–¥–∫–æ–≤–∞ –ø–æ–¥—ñ—è –∑ –≤—ñ–¥–æ–º–∏–º–∏ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—è–º–∏
3. –ö—ñ–Ω—Ü–µ–≤–∏–π –≤—É–∑–æ–ª (‚ñ≥) - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ–≤–Ω–æ—ó –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ —Ä—ñ—à–µ–Ω—å —Ç–∞ –ø–æ–¥—ñ–π
4. –ì—ñ–ª–∫–∏ - –º–æ–∂–ª–∏–≤—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ —Ä—ñ—à–µ–Ω—å –∞–±–æ –ø–æ–¥—ñ—ó

–ú–ï–¢–û–î–û–õ–û–ì–Ü–Ø:
1. –ü—Ä—è–º–∏–π —Ö—ñ–¥ - –ø–æ–±—É–¥–æ–≤–∞ –¥–µ—Ä–µ–≤–∞ –∑–ª—ñ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ:
   ‚Ä¢ –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ —Ä—ñ—à–µ–Ω—å —Ç–∞ –ø–æ–¥—ñ–π
   ‚Ä¢ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π –¥–ª—è –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –ø–æ–¥—ñ–π
   ‚Ä¢ –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏–≥—Ä–∞—à—ñ–≤ —É –∫—ñ–Ω—Ü–µ–≤–∏—Ö –≤—É–∑–ª–∞—Ö

2. –ó–≤–æ—Ä–æ—Ç–Ω—ñ–π —Ö—ñ–¥ - —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑–ø—Ä–∞–≤–∞ –Ω–∞–ª—ñ–≤–æ:
   ‚Ä¢ –û–±—á–∏—Å–ª–µ–Ω–Ω—è –æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å (EV) –¥–ª—è –≤—É–∑–ª—ñ–≤ –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ
   ‚Ä¢ –í–∏–±—ñ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏—Ö —Ä—ñ—à–µ–Ω—å (–º–∞–∫—Å–∏–º—É–º EV) –¥–ª—è –≤—É–∑–ª—ñ–≤ —Ä—ñ—à–µ–Ω—å
   ‚Ä¢ –ó–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—ó —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                –†–ï–ó–£–õ–¨–¢–ê–¢–ò –ó–ê –í–ê–†–Ü–ê–ù–¢–û–ú 4                                       ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

–ó–ê–í–î–ê–ù–ù–Ø 1 (–í–∏–±—ñ—Ä —Ç–∏–ø—É –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞):
""")

    print(f"   –û–ø—Ç–∏–º–∞–ª—å–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è: {best_decision1[0]}")
    print(f"   –û—á—ñ–∫—É–≤–∞–Ω–∏–π –ø—Ä–∏–±—É—Ç–æ–∫: {best_decision1[1]:,.0f} –≥.–æ.")
    print(f"""
   –í–∏—Å–Ω–æ–≤–æ–∫: –ü—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Å—Ç–∞–Ω —Ä–∏–Ω–∫—É
   —Ç–∞ —Ä—ñ–≤–Ω–æ–π–º–æ–≤—ñ—Ä–Ω–∏—Ö —Å–ø—Ä–∏—è—Ç–ª–∏–≤–∏—Ö/–Ω–µ—Å–ø—Ä–∏—è—Ç–ª–∏–≤–∏—Ö —É–º–æ–≤–∞—Ö –Ω–∞–π–∫—Ä–∞—â–∞
   —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è - {best_decision1[0]}.
""")

    print(f"–ó–ê–í–î–ê–ù–ù–Ø 2 (–î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É):")
    print(f"   –¶—ñ–Ω–Ω—ñ—Å—Ç—å –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó: {evpi:,.0f} –≥.–æ.")

    if evpi > 0:
        print(f"   –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è: –ü—Ä–æ–≤–µ—Å—Ç–∏ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É")
        print(f"   –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è: –û—á—ñ–∫—É–≤–∞–Ω–∏–π –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –ø—Ä–∏–±—É—Ç–æ–∫ ({evpi:,.0f} –≥.–æ.)")
        print(f"   –ø–µ—Ä–µ–≤–∏—â—É—î –≤–∞—Ä—Ç—ñ—Å—Ç—å –¥–æ—Å–ªÔøΩÔøΩ–¥–∂–µ–Ω–Ω—è ({Q:,.0f} –≥.–æ.)")
    else:
        print(f"   –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è: –ù–µ –ø—Ä–æ–≤–æ–¥–∏—Ç–∏ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É")
        print(f"   –û–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è: –í–∞—Ä—Ç—ñ—Å—Ç—å –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è ({Q:,.0f} –≥.–æ.) –Ω–µ")
        print(f"   –≤–∏–ø—Ä–∞–≤–¥–æ–≤—É—î—Ç—å—Å—è –æ—Ç—Ä–∏–º–∞–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é")

    print(f"""
   –í–∏—Å–Ω–æ–≤–æ–∫: –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ä–∏–Ω–∫—É –¥–æ–∑–≤–æ–ª—è—î —É—Ç–æ—á–Ω–∏—Ç–∏ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç—ñ —Å—Ç–∞–Ω—ñ–≤
   –ø—Ä–∏—Ä–æ–¥–∏, —â–æ –º–æ–∂–µ —Å—É—Ç—Ç—î–≤–æ –≤–ø–ª–∏–Ω—É—Ç–∏ –Ω–∞ –≤–∏–±—ñ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—ó —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó.
   –¢–µ–æ—Ä–µ–º–∞ –ë–∞–π—î—Å–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –∞–ø–æ—Å—Ç–µ—Ä—ñ–æ—Ä–Ω–∏—Ö
   –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø—Ä–æ–≥–Ω–æ–∑—É –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–æ–≤–æ—ó —Ñ—ñ—Ä–º–∏.
""")

    print(f"–ó–ê–í–î–ê–ù–ù–Ø 3 (–í–∏–±—ñ—Ä –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞):")
    print(f"   –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ A: –û—á—ñ–∫—É–≤–∞–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ = {ev_A:,.0f} –≥.–æ.")
    print(f"   –ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫ B: –û—á—ñ–∫—É–≤–∞–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ = {ev_B:,.0f} –≥.–æ.")

    if ev_B > ev_A:
        print(f"   –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è: –í–∏–±—Ä–∞—Ç–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ B")
        print(f"   –ï–∫–æ–Ω–æ–º—ñ—è: {ev_B - ev_A:,.0f} –≥.–æ.")
    else:
        print(f"   –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è: –í–∏–±—Ä–∞—Ç–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ A")
        print(f"   –ï–∫–æ–Ω–æ–º—ñ—è: {ev_A - ev_B:,.0f} –≥.–æ.")

    print(f"""
   –í–∏—Å–Ω–æ–≤–æ–∫: –í–∏–±—ñ—Ä –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –∫–æ–º–ø—Ä–æ–º—ñ—Å—ñ –º—ñ–∂ –Ω–∏–∂—á–æ—é
   —Ü—ñ–Ω–æ—é (–∑–Ω–∏–∂–∫–∞ {L:,.0f} –≥.–æ.) —Ç–∞ –º–æ–∂–ª–∏–≤–æ –≤–∏—â–∏–º –≤—ñ–¥—Å–æ—Ç–∫–æ–º –±—Ä–∞–∫—É.
   –û—á—ñ–∫—É–≤–∞–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –≤—Ä–∞—Ö–æ–≤—É—é—Ç—å —è–∫ –µ–∫–æ–Ω–æ–º—ñ—é –Ω–∞ –∑–∞–∫—É–ø—ñ–≤–ª—ñ, —Ç–∞–∫ —ñ
   –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —É—Å—É–Ω–µ–Ω–Ω—è –±—Ä–∞–∫—É.
""")

    print("""
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                  –ü–†–ê–ö–¢–ò–ß–ù–Ü –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–á                                        ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

1. –ó–ë–Ü–† –î–ê–ù–ò–•:
   ‚Ä¢ –Ü—Å—Ç–æ—Ä–∏—á–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –æ—Ü—ñ–Ω–∫–∏ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π
   ‚Ä¢ –ï–∫—Å–ø–µ—Ä—Ç–Ω—ñ –æ—Ü—ñ–Ω–∫–∏ –¥–ª—è —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ–π
   ‚Ä¢ –†–∏–Ω–∫–æ–≤—ñ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –¥–ª—è –∑–º–µ–Ω—à–µ–Ω–Ω—è –Ω–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ—Å—Ç—ñ

2. –ü–û–ë–£–î–û–í–ê –î–ï–†–ï–í–ê:
   ‚Ä¢ –ü–æ—á–∏–Ω–∞—Ç–∏ –∑ –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–∏—Ö —Ä—ñ—à–µ–Ω—å
   ‚Ä¢ –ù–µ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –¥–µ—Ç–∞–ª—è–º–∏
   ‚Ä¢ –í—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –ø–æ–¥—ñ–π —É —á–∞—Å—ñ

3. –ê–ù–ê–õ–Ü–ó –ß–£–¢–õ–ò–í–û–°–¢–Ü:
   ‚Ä¢ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–ø–ª–∏–≤ –∑–º—ñ–Ω–∏ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π
   ‚Ä¢ –û—Ü—ñ–Ω–∏—Ç–∏ –≤–ø–ª–∏–≤ –∑–º—ñ–Ω–∏ –≤–∏–≥—Ä–∞—à—ñ–≤
   ‚Ä¢ –í–∏–∑–Ω–∞—á–∏—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

4. –ü–†–ò–ô–ù–Ø–¢–¢–Ø –†–Ü–®–ï–ù–ù–Ø:
   ‚Ä¢ –í—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –Ω–µ —Ç—ñ–ª—å–∫–∏ –æ—á—ñ–∫—É–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
   ‚Ä¢ –û—Ü—ñ–Ω—é–≤–∞—Ç–∏ —Ä–∏–∑–∏–∫–∏ (–¥–∏—Å–ø–µ—Ä—Å—ñ—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤)
   ‚Ä¢ –ë—Ä–∞—Ç–∏ –¥–æ —É–≤–∞–≥–∏ –æ–±–º–µ–∂–µ–Ω–Ω—è —Ç–∞ –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏

5. –ú–û–ù–Ü–¢–û–†–ò–ù–ì:
   ‚Ä¢ –í—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ —Ñ–∞–∫—Ç–∏—á–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
   ‚Ä¢ –ü–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –∑ –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏
   ‚Ä¢ –ö–æ—Ä–∏–≥—É–≤–∞—Ç–∏ –º–æ–¥–µ–ª—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–æ—Å–≤—ñ–¥—É
    """)

    print("\n" + "=" * 100)
    print(" " * 35 + "–ü–†–û–ì–†–ê–ú–£ –ó–ê–í–ï–†–®–ï–ù–û")
    print("=" * 100)
    print("\nüìÅ –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ —Ñ–∞–π–ª–∏:")
    print("   ‚Ä¢ task1_decision_tree.png - –¥–µ—Ä–µ–≤–æ —Ä—ñ—à–µ–Ω—å –¥–ª—è –∑–∞–≤–¥–∞–Ω–Ω—è 1")
    print("   ‚Ä¢ task3_decision_tree.png - –¥–µ—Ä–µ–≤–æ —Ä—ñ—à–µ–Ω—å –¥–ª—è –∑–∞–≤–¥–∞–Ω–Ω—è 3")


if __name__ == "__main__":
    main()